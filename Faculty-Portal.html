<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Faculty Dashboard Prototype</title>
    <!-- Tải Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Tải font Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Thêm Heroicons (cho các biểu tượng) -->
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Ẩn tất cả các trang nội dung theo mặc định */
        .page-content {
            display: none;
        }
        /* Hiển thị trang đang hoạt động */
        .page-content.active {
            display: block;
        }
        /* Kiểu cho link điều hướng đang hoạt động */
        .nav-link.active {
            background-color: #4f46e5; /* Màu indigo-600 */
            color: #ffffff;
        }
        /* Hiệu ứng chuyển động mượt mà */
        .transition-all {
            transition: all 0.3s ease-in-out;
        }
        /* Kiểu cho Modal (Popup) */
        .modal {
            display: none; /* Ẩn theo mặc định */
            position: fixed;
            z-index: 50;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.5); /* Nền mờ */
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 24px;
            border: 1px solid #888;
            border-radius: 8px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #e5e7eb;
            padding-bottom: 16px;
        }
        .modal-title {
            font-size: 1.25rem;
            font-weight: 600;
        }
        .modal-close {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .modal-close:hover {
            color: #000;
        }
        /* Kiểu cho hàng chi tiết bị ẩn */
        .details-row.hidden {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-100">

    <div class="flex h-screen">
        <!-- Sidebar (Menu điều hướng) -->
        <aside class="w-64 bg-gray-900 text-gray-300 flex flex-col fixed h-full">
            <div class="flex items-center justify-center h-20 border-b border-gray-700">
                <h1 class="text-2xl font-bold text-white">Faculty Portal</h1>
            </div>
            <nav class="flex-1 mt-6">
                <a href="#" class="nav-link flex items-center px-6 py-3 transition-colors duration-200 hover:bg-gray-700" data-page="page-dashboard">
                    <ion-icon name="grid-outline" class="w-5 h-5 mr-3"></ion-icon>
                    Dashboard
                </a>
                <a href="#" class="nav-link flex items-center px-6 py-3 transition-colors duration-200 hover:bg-gray-700" data-page="page-courses">
                    <ion-icon name="book-outline" class="w-5 h-5 mr-3"></ion-icon>
                    My Courses
                </a>
                <a href="#" class="nav-link flex items-center px-6 py-3 transition-colors duration-200 hover:bg-gray-700" data-page="page-ai-tools">
                    <ion-icon name="sparkles-outline" class="w-5 h-5 mr-3"></ion-icon>
                    AI Productivity Tools
                </a>
                <a href="#" class="nav-link flex items-center px-6 py-3 transition-colors duration-200 hover:bg-gray-700" data-page="page-question-bank">
                    <ion-icon name="help-circle-outline" class="w-5 h-5 mr-3"></ion-icon>
                    Question Bank
                </a>
                <!-- === MỤC MỚI ĐƯỢC THÊM === -->
                <a href="#" class="nav-link flex items-center px-6 py-3 transition-colors duration-200 hover:bg-gray-700" data-page="page-analytics">
                    <ion-icon name="stats-chart-outline" class="w-5 h-5 mr-3"></ion-icon>
                    Courses's Assessment Analytics
                </a>
                <!-- ========================= -->
            </nav>
            <div class="p-4 border-t border-gray-700">
                <div class="flex items-center">
                    <img class="w-10 h-10 rounded-full" src="https://placehold.co/100x100/EBF4FF/76A9FA?text=GV" alt="Avatar Giảng viên">
                    <div class="ml-3">
                        <p class="text-sm font-medium text-white">Dr. Nguyễn Văn A</p>
                        <p class="text-xs text-gray-400">Lecturer</p>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content Area (Khu vực nội dung chính) -->
        <main class="flex-1 ml-64 p-8 overflow-y-auto">
            
            <!-- === 1. Trang Dashboard (Màn hình chính) === -->
            <div id="page-dashboard" class="page-content active">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Welcome back, Dr. Nguyễn!</h2>

                <!-- Lưới widget (Đã cập nhật theo yêu cầu) -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    
                    <!-- My Courses (Các khóa học của tôi) -->
                    <div class="lg:col-span-2 bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">My Courses</h3>
                        <ul class="space-y-4">
                            <li class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:shadow-sm transition-all">
                                <div>
                                    <p class="font-semibold text-indigo-700">CS101: Introduction to Computer Science</p>
                                    <p class="text-sm text-gray-600">3 new submissions</p>
                                </div>
                                <button class="text-sm bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full hover:bg-indigo-200">View</button>
                            </li>
                            <li class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:shadow-sm transition-all">
                                <div>
                                    <p class="font-semibold text-indigo-700">CS340: Machine Learning</p>
                                    <p class="text-sm text-gray-600">Grading for Midterm 2 pending</p>
                                </div>
                                <button class="text-sm bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full hover:bg-indigo-200">View</button>
                            </li>
                            <li class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:shadow-sm transition-all">
                                <div>
                                    <p class="font-semibold text-indigo-700">DATA200: Data Structures</p>
                                    <p class="text-sm text-gray-600">No pending tasks</p>
                                </div>
                                <button class="text-sm bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full hover:bg-indigo-200">View</button>
                            </li>
                        </ul>
                    </div>

                    <!-- New Students Submission (Bài nộp mới) (ĐÃ CẬP NHẬT) -->
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">New Submissions (24h)</h3>
                        <ul class="space-y-3">
                            <li class="flex items-center">
                                <span class="flex-shrink-0 flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-600 rounded-full mr-3">
                                    <ion-icon name="document-text-outline" class="w-5 h-5"></ion-icon>
                                </span>
                                <div>
                                    <p class="font-medium">Lê Văn Hùng</p>
                                    <p class="text-sm text-gray-600">Submitted Assessment 2 (CS101)</p>
                                </div>
                            </li>
                            <li class="flex items-center">
                                <span class="flex-shrink-0 flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-600 rounded-full mr-3">
                                    <ion-icon name="document-text-outline" class="w-5 h-5"></ion-icon>
                                </span>
                                <div>
                                    <p class="font-medium">Trần Thị B</p>
                                    <p class="text-sm text-gray-600">Submitted Assessment 2 (CS101)</p>
                                </div>
                            </li>
                             <li class="flex items-center">
                                <span class="flex-shrink-0 flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-600 rounded-full mr-3">
                                    <ion-icon name="document-text-outline" class="w-5 h-5"></ion-icon>
                                </span>
                                <div>
                                    <p class="font-medium">Phạm Gia C</p>
                                    <p class="text-sm text-gray-600">Submitted Midterm (CS340)</p>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <!-- Assessments Tracking (Theo dõi bài KT) -->
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">Assessments Tracking</h3>
                        <ul class="space-y-3">
                            <li class="flex items-center">
                                <span class="flex items-center justify-center w-8 h-8 bg-red-100 text-red-600 rounded-lg mr-3">
                                    <ion-icon name="alert-circle-outline" class="w-5 h-5"></ion-icon>
                                </span>
                                <div>
                                    <p class="font-medium">CS101 - Assessment 2</p>
                                    <p class="text-sm text-gray-600">Incomplete (1 student pending)</p>
                                </div>
                            </li>
                            <li class="flex items-center">
                                <span class="flex items-center justify-center w-8 h-8 bg-green-100 text-green-600 rounded-lg mr-3">
                                    <ion-icon name="checkmark-circle-outline" class="w-5 h-5"></ion-icon>
                                </span>
                                <div>
                                    <p class="font-medium">DATA200 - Assessment 1</p>
                                    <p class="text-sm text-gray-600">Complete (All graded)</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- === 2. Trang AI Productivity Tools (Công cụ AI) === -->
            <div id="page-ai-tools" class="page-content">
                <!-- AI Tools Hub Screen -->
                <div id="ai-tools-hub" class="page-content active">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6">AI Productivity Tools</h2>
                    <div class="bg-white p-6 rounded-lg shadow-md mb-6">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">What would you like to do?</h3>
                        <div class="flex space-x-4">
                            <button id="btn-show-generate-questions" class="flex items-center bg-indigo-600 text-white px-5 py-3 rounded-lg shadow-md hover:bg-indigo-700 transition-all">
                                <ion-icon name="help-circle-outline" class="w-5 h-5 mr-2"></ion-icon>
                                Generate Questions
                            </button>
                            <button id="btn-show-summarize" class="flex items-center bg-white text-gray-700 px-5 py-3 rounded-lg shadow-md hover:bg-gray-50 transition-all border">
                                <ion-icon name="document-text-outline" class="w-5 h-5 mr-2"></ion-icon>
                                Summarize Meeting/Lecture
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Generate Questions Screen (Ẩn ban đầu) -->
                <div id="generate-questions-screen" class="page-content">
                    <button class="btn-back-to-ai-hub text-sm text-indigo-600 hover:underline mb-4">&lt; Back to AI Tools</button>
                    <h2 class="text-3xl font-bold text-gray-800 mb-6">Generate Questions</h2>
                    
                    <!-- Section 1: Submission form -->
                    <div class="bg-white p-6 rounded-lg shadow-md mb-6">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">Section 1: Submission</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <div>
                                <label for="gen-q-course" class="block text-sm font-medium text-gray-700">Select Course</label>
                                <select id="gen-q-course" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                                    <option>CS101: Introduction to Computer Science</option>
                                    <option>CS340: Machine Learning</option>
                                </select>
                            </div>
                            <div>
                                <label for="gen-q-doc" class="block text-sm font-medium text-gray-700">Select Document(s)</label>
                                <!-- Thêm 'multiple' và 'size="3"' để cho phép chọn nhiều -->
                                <select id="gen-q-doc" multiple size="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                                    <option>Week 1 - Introduction.pptx</option>
                                    <option>Reading: Chapter 1 (PDF)</option>
                                    <option>Week 2 - Algorithms.pptx</option>
                                </select>
                                <p class="mt-1 text-xs text-gray-500">Ctrl/Cmd + click to select multiple documents.</p>
                            </div>
                        </div>
                        <div class="mb-4">
                            <label for="gen-q-prompt" class="block text-sm font-medium text-gray-700">Prompt</label>
                            <textarea id="gen-q-prompt" rows="4" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">Generate 5 multiple-choice questions based on the selected document. Focus on key concepts.</textarea>
                        </div>
                        <button class="flex items-center bg-green-600 text-white px-5 py-3 rounded-lg shadow-md hover:bg-green-700 transition-all">
                            <ion-icon name="cog-outline" class="w-5 h-5 mr-2"></ion-icon>
                            Submit
                        </button>
                    </div>

                    <!-- Section 2: Generated questions -->
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">Section 2: Generated Questions</h3>
                        <div class="space-y-4 mb-4">
                            <!-- Example 1: SCQ -->
                            <textarea rows="6" class="block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm font-mono">
[SCQ]
Question: Which of the following is a sorting algorithm?
A) K-Means
B) Bubble Sort
C) Linear Regression
D) K-Nearest Neighbors
Answer: B
</textarea>
                            <!-- Example 2: MCQ -->
                            <textarea rows="7" class="block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm font-mono">
[MCQ]
Question: Which of these are data structures? (Select all that apply)
A) Array
B) For Loop
C) Linked List
D) If Statement
Answer: A, C
</textarea>
                        </div>
                        <button class="flex items-center bg-indigo-600 text-white px-5 py-3 rounded-lg shadow-md hover:bg-indigo-700 transition-all">
                            <ion-icon name="save-outline" class="w-5 h-5 mr-2"></ion-icon>
                            Confirm & Save to Question Bank
                        </button>
                    </div>
                </div>

                <!-- Summarize Meeting/Lecture Screen (Ẩn ban đầu) -->
                <div id="summarize-lecture-screen" class="page-content">
                    <button class="btn-back-to-ai-hub text-sm text-indigo-600 hover:underline mb-4">&lt; Back to AI Tools</button>
                    <h2 class="text-3xl font-bold text-gray-800 mb-6">Summarize Meeting/Lecture</h2>

                    <!-- Section 1: Submission form -->
                    <div class="bg-white p-6 rounded-lg shadow-md mb-6">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">Section 1: Submission</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <div>
                                <label for="sum-course" class="block text-sm font-medium text-gray-700">Select Course</label>
                                <select id="sum-course" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                                    <option>CS101: Introduction to Computer Science</option>
                                    <option>CS340: Machine Learning</option>
                                </select>
                            </div>
                            <div>
                                <label for="sum-doc" class="block text-sm font-medium text-gray-700">Select Document</label>
                                <select id="sum-doc" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                                    <option>Week 1 - Introduction.pptx</option>
                                    <option>Lecture Recording - Nov 3.mp4</option>
                                </select>
                            </div>
                        </div>
                        <div class="mb-4">
                            <label for="sum-prompt" class="block text-sm font-medium text-gray-700">Prompt</label>
                            <textarea id="sum-prompt" rows="4" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">Summarize the following document into key bullet points and provide 3 learning objectives.</textarea>
                        </div>
                        <button class="flex items-center bg-green-600 text-white px-5 py-3 rounded-lg shadow-md hover:bg-green-700 transition-all">
                            <ion-icon name="cog-outline" class="w-5 h-5 mr-2"></ion-icon>
                            Submit
                        </button>
                    </div>

                    <!-- Section 2: Summary -->
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">Section 2: Summary</h3>
                        <div class="p-4 bg-gray-50 rounded-md border border-gray-200 text-gray-700">
                            (Summary of selected document will appear here. View only.)
                        </div>
                    </div>
                </div>
            </div>

            <!-- === 4. Trang My Courses (Đã cập nhật) === -->
            <div id="page-courses" class="page-content">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">CS101: Introduction to Computer Science</h2>
                
                <!-- Tabs for Course Hub -->
                <div class="mb-6">
                    <div class="border-b border-gray-200">
                        <nav id="course-tabs" class="flex -mb-px space-x-6" aria-label="Tabs">
                            <a href="#" data-tab-toggle="materials" class="tab-link active border-indigo-500 text-indigo-600 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                                <ion-icon name="document-text-outline" class="w-5 h-5 mr-1 inline-block"></ion-icon> Materials
                            </a>
                            <a href="#" data-tab-toggle="students" class="tab-link border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                                <ion-icon name="people-outline" class="w-5 h-5 mr-1 inline-block"></ion-icon> Students
                            </a>
                            <a href="#" data-tab-toggle="assessments" class="tab-link border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                                <ion-icon name="bar-chart-outline" class="w-5 h-5 mr-1 inline-block"></ion-icon> Assessments
                            </a>
                        </nav>
                    </div>
                </div>

                <!-- Tab Content for Course Hub -->
                <div id="course-tab-content">
                    <!-- Course Materials Screen (ĐÃ CẬP NHẬT) -->
                    <div data-tab-target="materials" class="tab-content active">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-semibold text-gray-800">Course Materials</h3>
                            <button class="flex items-center bg-indigo-600 text-white px-4 py-2 rounded-lg shadow-md hover:bg-indigo-700 transition-all">
                                <ion-icon name="cloud-upload-outline" class="w-5 h-5 mr-2"></ion-icon>
                                Upload New Material
                            </button>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <ul class="space-y-4">
                                <li class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:shadow-sm">
                                    <div class="flex items-center">
                                        <ion-icon name="document-attach-outline" class="w-6 h-6 text-red-500 mr-3"></ion-icon>
                                        <div>
                                            <p class="font-medium">Week 1 - Introduction.pptx</p>
                                            <p class="text-sm text-gray-500">Uploaded: Nov 1, 2025</p>
                                        </div>
                                    </div>
                                    <div class="flex space-x-2">
                                        <button class="text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded-full hover:bg-blue-200">AI-Summary</button>
                                        <button class="text-sm bg-red-100 text-red-700 px-3 py-1 rounded-full hover:bg-red-200">Delete</button>
                                    </div>
                                </li>
                                <li class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:shadow-sm">
                                    <div class="flex items-center">
                                        <ion-icon name="document-text-outline" class="w-6 h-6 text-gray-500 mr-3"></ion-icon>
                                        <div>
                                            <p class="font-medium">Reading: Chapter 1 (PDF)</p>
                                            <p class="text-sm text-gray-500">Uploaded: Nov 1, 2025</p>
                                        </div>
                                    </div>
                                    <div class="flex space-x-2">
                                        <button class="text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded-full hover:bg-blue-200">AI-Summary</button>
                                        <button class="text-sm bg-red-100 text-red-700 px-3 py-1 rounded-full hover:bg-red-200">Delete</button>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Students Screen (ĐÃ CẬP NHẬT) -->
                    <div data-tab-target="students" class="tab-content hidden">
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-xl font-semibold text-gray-800 mb-4">Student List (CS101)</h3>
                            <table class="w-full text-left">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="p-3 font-medium">Name</th>
                                        <th class="p-3 font-medium">Email</th>
                                        <th class="p-3 font-medium">Status</th>
                                        <th class="p-3 font-medium text-right">Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Student 1 -->
                                    <tr class="border-b">
                                        <td class="p-3">Lê Văn Hùng</td>
                                        <td class="p-3">hung.le@email.com</td>
                                        <td class="p-3 text-red-600 font-medium">Incomplete (Assessment 2)</td>
                                        <td class="p-3 text-right">
                                            <button class="text-sm text-indigo-600 hover:underline" data-toggle-details="student-details-1">View Details</button>
                                        </td>
                                    </tr>
                                    <tr id="student-details-1" class="details-row hidden">
                                        <td colspan="4" class="p-4 bg-gray-50 border-b">
                                            <h5 class="font-semibold mb-2">Assessment Details for Lê Văn Hùng:</h5>
                                            <ul class="list-disc pl-5 space-y-1 text-sm">
                                                <li>Assessment 1: <span class="font-medium text-green-600">Complete (9/10)</span></li>
                                                <li>Assessment 2: <span class="font-medium text-red-600">Incomplete (0/10)</span></li>
                                                <li>Midterm Assessment: <span class="font-medium text-gray-500">Not Started</span></li>
                                            </ul>
                                        </td>
                                    </tr>
                                    <!-- Student 2 -->
                                    <tr class="border-b">
                                        <td class="p-3">Trần Thị B</td>
                                        <td class="p-3">b.tran@email.com</td>
                                        <td class="p-3 text-green-600 font-medium">Complete</td>
                                        <td class="p-3 text-right">
                                            <button class="text-sm text-indigo-600 hover:underline" data-toggle-details="student-details-2">View Details</button>
                                        </td>
                                    </tr>
                                    <tr id="student-details-2" class="details-row hidden">
                                        <td colspan="4" class="p-4 bg-gray-50 border-b">
                                            <h5 class="font-semibold mb-2">Assessment Details for Trần Thị B:</h5>
                                            <ul class="list-disc pl-5 space-y-1 text-sm">
                                                <li>Assessment 1: <span class="font-medium text-green-600">Complete (10/10)</span></li>
                                                <li>Assessment 2: <span class="font-medium text-green-600">Complete (8/10)</span></li>
                                                <li>Midterm Assessment: <span class="font-medium text-green-600">Complete (22/25)</span></li>
                                            </ul>
                                        </td>
                                    </tr>
                                    <!-- Student 3 -->
                                    <tr class="border-b">
                                        <td class="p-3">Phạm Gia C</td>
                                        <td class="p-3">c.pham@email.com</td>
                                        <td class="p-3 text-green-600 font-medium">Complete</td>
                                        <td class="p-3 text-right">
                                            <button class="text-sm text-indigo-600 hover:underline" data-toggle-details="student-details-3">View Details</button>
                                        </td>
                                    </tr>
                                    <tr id="student-details-3" class="details-row hidden">
                                        <td colspan="4" class="p-4 bg-gray-50 border-b">
                                            <h5 class="font-semibold mb-2">Assessment Details for Phạm Gia C:</h5>
                                            <ul class="list-disc pl-5 space-y-1 text-sm">
                                                <li>Assessment 1: <span class="font-medium text-green-600">Complete (8/10)</span></li>
                                                <li>Assessment 2: <span class="font-medium text-green-600">Complete (9/10)</span></li>
                                                <li>Midterm Assessment: <span class="font-medium text-gray-500">Not Started</span></li>
                                            </ul>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Assessments Screen (ĐÃ CẬP NHẬT) -->
                    <div data-tab-target="assessments" class="tab-content hidden">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-semibold text-gray-800">Assessments (CS101)</h3>
                            <button id="btn-open-assessment-modal" class="flex items-center bg-indigo-600 text-white px-4 py-2 rounded-lg shadow-md hover:bg-indigo-700 transition-all">
                                <ion-icon name="add-outline" class="w-5 h-5 mr-2"></ion-icon>
                                Create New Assessment
                            </button>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h4 class="text-lg font-semibold mb-3">Deployed</h4>
                            <div class="space-y-4">
                                <!-- Assessment 2 -->
                                <div class="p-4 border border-red-300 bg-red-50 rounded-lg">
                                    <div class="flex justify-between items-center mb-2">
                                        <p class="font-semibold text-red-700">Assessment 2 (Incomplete)</p>
                                        <div class="flex space-x-3">
                                            <button class="text-sm text-indigo-600 hover:underline" data-toggle-details="assessment-details-2">View Details</button>
                                            <button class="text-sm bg-red-600 text-white px-3 py-1 rounded-full hover:bg-red-700">Force Complete Course</button>
                                        </div>
                                    </div>
                                    <p class="text-sm text-gray-600">Questions: 10 | Duration: 15 mins | Status: Deployed</p>
                                    <p class="text-sm text-gray-600">Date: Nov 5 - Nov 10</p>
                                    <div id="assessment-details-2" class="details-row hidden mt-4 pt-4 border-t border-red-200">
                                        <h5 class="font-semibold mb-2 text-gray-800">Submission Status (Assessment 2):</h5>
                                        <ul class="list-disc pl-5 space-y-1 text-sm">
                                            <li>Lê Văn Hùng: <span class="font-medium text-red-600">Incomplete</span></li>
                                            <li>Trần Thị B: <span class="font-medium text-green-600">Complete</span></li>
                                            <li>Phạm Gia C: <span class="font-medium text-green-600">Complete</span></li>
                                        </ul>
                                    </div>
                                </div>
                                <!-- Assessment 1 -->
                                <div class="p-4 border border-green-300 bg-green-50 rounded-lg">
                                     <div class="flex justify-between items-center mb-2">
                                        <p class="font-semibold text-green-700">Assessment 1 (Complete)</p>
                                        <button class="text-sm text-indigo-600 hover:underline" data-toggle-details="assessment-details-1">View Details</button>
                                    </div>
                                    <p class="text-sm text-gray-600">Questions: 5 | Duration: 10 mins | Status: Deployed</p>
                                    <p class="text-sm text-gray-600">Date: Nov 1 - Nov 3</p>
                                    <div id="assessment-details-1" class="details-row hidden mt-4 pt-4 border-t border-green-200">
                                        <h5 class="font-semibold mb-2 text-gray-800">Submission Status (Assessment 1):</h5>
                                        <ul class="list-disc pl-5 space-y-1 text-sm">
                                            <li>Lê Văn Hùng: <span class="font-medium text-green-600">Complete</span></li>
                                            <li>Trần Thị B: <span class="font-medium text-green-600">Complete</span></li>
                                            <li>Phạm Gia C: <span class="font-medium text-green-600">Complete</span></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <h4 class="text-lg font-semibold mt-6 mb-3">Drafts</h4>
                            <div class="space-y-4">
                                <div class="p-4 border border-gray-200 bg-gray-50 rounded-lg">
                                    <div class="flex justify-between items-center mb-2">
                                        <p class="font-semibold text-gray-700">Midterm Assessment (Draft)</p>
                                        <button class="text-sm text-indigo-600 hover:underline" data-toggle-details="assessment-details-3">View Details</button>
                                    </div>
                                    <p class="text-sm text-gray-600">Questions: 25 | Duration: 45 mins | Status: Draft</p>
                                    <p class="text-sm text-gray-600">Start Date: (Not set)</p>
                                    <div id="assessment-details-3" class="details-row hidden mt-4 pt-4 border-t border-gray-200">
                                        <h5 class="font-semibold mb-2 text-gray-800">Submission Status (Midterm Assessment):</h5>
                                        <ul class="list-disc pl-5 space-y-1 text-sm">
                                            <li>Lê Văn Hùng: <span class="font-medium text-gray-500">Not Started</span></li>
                                            <li>Trần Thị B: <span class="font-medium text-gray-500">Not Started</span></li>
                                            <li>Phạm Gia C: <span class="font-medium text-gray-500">Not Started</span></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- === 5. Trang Question Bank (Đã cập nhật) === -->
            <div id="page-question-bank" class="page-content">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Question Bank</h2>
                
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <!-- Filters and Actions -->
                    <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
                        <div class="flex-1 w-full md:w-auto">
                            <input type="text" placeholder="Search questions..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                        </div>
                        <div class="flex gap-4">
                            <select class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none">
                                <option>Filter by Course</option>
                                <option>CS101</option>
                                <option>CS340</option>
                            </select>
                            <select class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none">
                                <option>Filter by Difficulty</option>
                                <option>Easy</option>
                                <option>Medium</option>
                                <option>Hard</option>
                            </select>
                        </div>
                        <button id="btn-open-question-modal" class="flex items-center bg-green-600 text-white px-4 py-2 rounded-lg shadow-md hover:bg-green-700 transition-all w-full md:w-auto justify-center">
                            <ion-icon name="add-outline" class="w-5 h-5 mr-2"></ion-icon>
                            Add New Question
                        </button>
                    </div>

                    <!-- Question List -->
                    <div class="space-y-4">
                        <!-- Question Item 1 -->
                        <div class="p-4 border border-gray-200 rounded-lg bg-gray-50">
                            <p class="font-medium text-gray-800 mb-2">Which of the following is a sorting algorithm?</p>
                            <p class="text-sm text-gray-600 ml-4">A) K-Means</p>
                            <p class="text-sm text-green-600 font-medium ml-4">B) Bubble Sort (Correct)</p>
                            <p class="text-sm text-gray-600 ml-4">C) Linear Regression</p>
                            <div class="flex items-center justify-between mt-2">
                                <span class="text-xs font-semibold bg-indigo-100 text-indigo-800 px-2 py-0.5 rounded-full">Single Choice</span>
                                <div class="flex gap-2">
                                    <span class="text-xs bg-gray-200 text-gray-700 px-2 py-0.5 rounded-full">Topic: Algorithms</span>
                                    <span class="text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded-full">Difficulty: Easy</span>
                                </div>
                            </div>
                        </div>
                         <!-- Question Item 2 (Đã sửa từ Coding) -->
                        <div class="p-4 border border-gray-200 rounded-lg bg-gray-50">
                            <p class="font-medium text-gray-800 mb-2">Which of these are data structures? (Select all that apply)</p>
                            <p class="text-sm text-green-600 font-medium ml-4">A) Array (Correct)</p>
                            <p class="text-sm text-gray-600 ml-4">B) For Loop</p>
                            <p class="text-sm text-green-600 font-medium ml-4">C) Linked List (Correct)</p>
                            <p class="text-sm text-gray-600 ml-4">D) If Statement</p>
                             <p class="text-sm text-green-600 font-medium ml-4 mt-1">Correct Answer: A, C</p>
                            <div class="flex items-center justify-between mt-2">
                                <span class="text-xs font-semibold bg-purple-100 text-purple-800 px-2 py-0.5 rounded-full">Multiple Choice</span>
                                <div class="flex gap-2">
                                    <span class="text-xs bg-gray-200 text-gray-700 px-2 py-0.5 rounded-full">Topic: Basics</span>
                                    <span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Difficulty: Medium</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- === 6. TRANG MỚI ĐƯỢC THÊM: Courses's Assessment Analytics === -->
            <div id="page-analytics" class="page-content">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Courses's Assessment Analytics</h2>

                <div class="bg-white p-6 rounded-lg shadow-md">
                    <div class="space-y-6">
                        
                        <!-- Course 1: CS101 -->
                        <div>
                            <h3 class="text-xl font-semibold text-gray-800 mb-3 border-b pb-2">CS101: Introduction to Computer Science</h3>
                            <div class="space-y-3 pl-4">
                                <!-- Assessment 1 -->
                                <div class="p-3 border rounded-lg bg-gray-50">
                                    <div class="flex justify-between items-center">
                                        <p class="font-medium text-gray-700">Assessment 1</p>
                                        <button class="text-sm text-indigo-600 hover:underline" data-toggle-details="analytics-cs101-a1">View Details</button>
                                    </div>
                                    <div id="analytics-cs101-a1" class="details-row hidden mt-4 pt-4 border-t border-gray-200">
                                        <h5 class="font-semibold mb-2 text-gray-800">Assessment Analytics (A1):</h5>
                                        <ul class="list-disc pl-5 space-y-1 text-sm">
                                            <li>Score Average: <span class="font-medium">8.5 / 10</span></li>
                                            <li>Highest Score: <span class="font-medium">10 / 10</span></li>
                                            <li>Lowest Score: <span class="font-medium">6 / 10</span></li>
                                            <li class="pt-2 font-medium">Top Failed Questions:</li>
                                            <ul class="list-circle pl-6">
                                                <li>Q3: "What is a variable?"</li>
                                                <li>Q5: "Difference between Array and List."</li>
                                            </ul>
                                        </ul>
                                    </div>
                                </div>
                                <!-- Assessment 2 -->
                                <div class="p-3 border rounded-lg bg-gray-50">
                                    <div class="flex justify-between items-center">
                                        <p class="font-medium text-gray-700">Assessment 2</p>
                                        <button class="text-sm text-indigo-600 hover:underline" data-toggle-details="analytics-cs101-a2">View Details</button>
                                    </div>
                                    <div id="analytics-cs101-a2" class="details-row hidden mt-4 pt-4 border-t border-gray-200">
                                        <h5 class="font-semibold mb-2 text-gray-800">Assessment Analytics (A2):</h5>
                                        <ul class="list-disc pl-5 space-y-1 text-sm">
                                            <li>Score Average: <span class="font-medium">7.2 / 10</span></li>
                                            <li>Highest Score: <span class="font-medium">9 / 10</span></li>
                                            <li>Lowest Score: <span class="font-medium">5 / 10</span></li>
                                            <li class="pt-2 font-medium">Top Failed Questions:</li>
                                            <ul class="list-circle pl-6">
                                                <li>Q8: "Explain polymorphism."</li>
                                                <li>Q2: "What is a 'for' loop?"</li>
                                                <li>Q6: "Sorting algorithms comparison."</li>
                                            </ul>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Course 2: CS340 -->
                        <div>
                            <h3 class="text-xl font-semibold text-gray-800 mb-3 border-b pb-2">CS340: Machine Learning</h3>
                            <div class="space-y-3 pl-4">
                                <!-- Midterm Assessment -->
                                <div class="p-3 border rounded-lg bg-gray-50">
                                    <div class="flex justify-between items-center">
                                        <p class="font-medium text-gray-700">Midterm Assessment</p>
                                        <button class="text-sm text-indigo-600 hover:underline" data-toggle-details="analytics-cs340-m1">View Details</button>
                                    </div>
                                    <div id="analytics-cs340-m1" class="details-row hidden mt-4 pt-4 border-t border-gray-200">
                                        <h5 class="font-semibold mb-2 text-gray-800">Assessment Analytics (Midterm):</h5>
                                        <ul class="list-disc pl-5 space-y-1 text-sm">
                                            <li>Score Average: <span class="font-medium">78 / 100</span></li>
                                            <li>Highest Score: <span class="font-medium">95 / 100</span></li>
                                            <li>Lowest Score: <span class="font-medium">45 / 100</span></li>
                                            <li class="pt-2 font-medium">Top Failed Questions:</li>
                                            <ul class="list-circle pl-6">
                                                <li>Q15: "Explain the bias-variance tradeoff."</li>
                                                <li>Q20: "How does a Random Forest work?"</li>
                                                <li>Q7: "Difference between Classification and Regression."</li>
                                            </ul>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            
        </main>
    </div>

    <!-- === MODAL 1: Create New Assessment === -->
    <div id="assessment-modal" class="modal flex">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Create New Assessment</h3>
                <span class="modal-close" data-modal-close="assessment-modal">&times;</span>
            </div>
            <div class="mt-4">
                <form class="space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Number of questions</label>
                            <input type="number" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Duration (minutes)</label>
                            <input type="number" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm">
                        </div>
                    </div>
                    <div class="grid grid-cols-3 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">% Easy</label>
                            <input type="number" placeholder="e.g., 50" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">% Medium</label>
                            <input type="number" placeholder="e.g., 30" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">% Hard</label>
                            <input type="number" placeholder="e.g., 20" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Start Date</label>
                            <input type="date" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">End Date</label>
                            <input type="date" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Enable Randomization</label>
                        <select class="mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm">
                            <option>Yes</option>
                            <option>No</option>
                        </select>
                    </div>
                    <div class="flex justify-end space-x-3 pt-4">
                        <button type="button" class="bg-white border border-gray-300 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-50" data-modal-close="assessment-modal">Cancel</button>
                        <button type="button" class="bg-gray-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-700">Save as Draft</button>
                        <button type="button" class="bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-indigo-700">Deploy to Students</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- === MODAL 2: Add New Question (ĐÃ CẬP NHẬT) === -->
    <div id="add-question-modal" class="modal flex">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add New Question</h3>
                <span class="modal-close" data-modal-close="add-question-modal">&times;</span>
            </div>
            <div class="mt-4">
                <form classs="space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Question Type</label>
                            <select id="question-type-select" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm">
                                <option value="scq">Single Choice</option>
                                <option value="mcq">Multiple Choice (MCQ)</option>
                                <!-- Đã xóa Essay và Coding -->
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Question Difficulty</label>
                            <select class="mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm">
                                <option>Easy</option>
                                <option>Medium</option>
                                <option>Hard</option>
                            </select>
                        </div>
                    </div>
                    <div class="mt-4">
                        <label class="block text-sm font-medium text-gray-700">Question Prompt</label>
                        <textarea rows="4" placeholder="Enter the question text here..." class="mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm"></textarea>
                    </div>
                    <div id="answers-container" class="mt-4">
                        <label class="block text-sm font-medium text-gray-700">Answers</V>
                        <div class="space-y-2 mt-1">
                            <div class="flex items-center">
                                <input type="radio" name="correct-answer" class="w-4 h-4 text-indigo-600">
                                <input type="text" placeholder="Answer Option 1" class="ml-2 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm">
                            </div>
                            <div class="flex items-center">
                                <input type="radio" name="correct-answer" class="w-4 h-4 text-indigo-600">
                                <input type="text" placeholder="Answer Option 2" class="ml-2 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm">
                            </div>
                        </div>
                        <button type="button" id="add-answer-option" class="text-sm text-indigo-600 hover:underline mt-2">+ Add another option</button>
                    </div>
                     <div class="mt-4">
                        <label class="block text-sm font-medium text-gray-700">Topic (Tags)</label>
                        <input type="text" placeholder="e.g., Algorithms, Basics" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm">
                    </div>
                    <div class="flex justify-end space-x-3 pt-4 mt-6">
                        <button type="button" class="bg-white border border-gray-300 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-50" data-modal-close="add-question-modal">Cancel</button>
                        <button type="button" class="bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-700">Save Question</button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const navLinks = document.querySelectorAll('.nav-link');
            const pageContents = document.querySelectorAll('.page-content');
            
            // --- HÀM MỚI: Xử lý Modal (Popup) ---
            function initModals() {
                const modalOpenButtons = document.querySelectorAll('[id^="btn-open-"]');
                const modalCloseButtons = document.querySelectorAll('[data-modal-close]');

                modalOpenButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        const modalId = button.id.replace('btn-open-', '') + '-modal';
                        const modal = document.getElementById(modalId);
                        if(modal) {
                            modal.style.display = 'flex';
                        }
                    });
                });

                modalCloseButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        const modalId = button.getAttribute('data-modal-close');
                        const modal = document.getElementById(modalId);
                        if(modal) {
                            modal.style.display = 'none';
                        }
                    });
                });

                // Đóng modal khi click ra ngoài
                window.addEventListener('click', (event) => {
                    if (event.target.classList.contains('modal')) {
                        event.target.style.display = 'none';
                    }
                });
            }

            // --- HÀM MỚI: Xử lý các bộ tab (tabsets) nội bộ ---
            function initTabset(navId, contentWrapperId) {
                const tabNav = document.getElementById(navId);
                const tabContentWrapper = document.getElementById(contentWrapperId);

                if (!tabNav || !tabContentWrapper) return;

                const tabLinks = tabNav.querySelectorAll('[data-tab-toggle]');
                const tabContents = tabContentWrapper.querySelectorAll('[data-tab-target]');

                tabLinks.forEach(link => {
                    link.addEventListener('click', function(e) {
                        e.preventDefault();
                        const targetName = this.getAttribute('data-tab-toggle');

                        // Xử lý active link
                        tabLinks.forEach(l => {
                            l.classList.remove('active', 'border-indigo-500', 'text-indigo-600');
                            l.classList.add('border-transparent', 'text-gray-500', 'hover:text-gray-700', 'hover:border-gray-300');
                        });
                        this.classList.add('active', 'border-indigo-500', 'text-indigo-600');
                        this.classList.remove('border-transparent', 'text-gray-500', 'hover:text-gray-700', 'hover:border-gray-300');

                        // Xử lý active content
                        tabContents.forEach(content => {
                            if (content.getAttribute('data-tab-target') === targetName) {
                                content.classList.remove('hidden');
                                content.classList.add('active');
                            } else {
                                content.classList.add('hidden');
                                content.classList.remove('active');
                            }
                        });
                    });
                });
            }
            
            // --- HÀM CŨ: Xử lý Sidebar (Menu chính) (ĐÃ SỬA LỖI) ---
            function showPage(pageId) {
                // Ẩn tất cả các trang (main pages)
                document.querySelectorAll('main > .page-content').forEach(page => {
                    page.classList.remove('active');
                    page.style.display = 'none'; // <-- ĐÂY LÀ PHẦN SỬA LỖI
                });
                // Bỏ active tất cả link
                navLinks.forEach(link => {
                    link.classList.remove('active');
                });

                // Hiển thị trang được yêu cầu
                const pageToShow = document.getElementById(pageId);
                if (pageToShow) {
                    pageToShow.classList.add('active');
                    pageToShow.style.display = 'block';

                    // Xử lý đặc biệt cho AI tools (hiển thị hub)
                    if (pageId === 'page-ai-tools') {
                        showAiToolsScreen('ai-tools-hub');
                    }
                }

                // Active link tương ứng
                const activeLink = document.querySelector(`.nav-link[data-page="${pageId}"]`);
                if (activeLink) {
                    activeLink.classList.add('active');
                }
            }

            // Gán sự kiện click cho các link điều hướng
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const pageId = this.getAttribute('data-page');
                    showPage(pageId);
                });
            });

            // --- HÀM MỚI: Xử lý các màn hình con trong AI Tools ---
            function showAiToolsScreen(screenId) {
                // Ẩn tất cả các màn hình con của AI tools
                document.querySelectorAll('#page-ai-tools > .page-content').forEach(screen => {
                    screen.classList.remove('active');
                    screen.style.display = 'none';
                });
                // Hiển thị màn hình con được yêu cầu
                const screenToShow = document.getElementById(screenId);
                if (screenToShow) {
                    screenToShow.classList.add('active');
                    screenToShow.style.display = 'block';
                }
            }
            
            document.getElementById('btn-show-generate-questions').addEventListener('click', () => {
                showAiToolsScreen('generate-questions-screen');
            });
            document.getElementById('btn-show-summarize').addEventListener('click', () => {
                showAiToolsScreen('summarize-lecture-screen');
            });
            document.querySelectorAll('.btn-back-to-ai-hub').forEach(btn => {
                btn.addEventListener('click', () => {
                    showAiToolsScreen('ai-tools-hub');
                });
            });

            // --- HÀM MỚI: Xử lý bật/tắt "View Details" ---
            function initToggleDetails() {
                const toggleButtons = document.querySelectorAll('[data-toggle-details]');
                toggleButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        const targetId = button.getAttribute('data-toggle-details');
                        const targetElement = document.getElementById(targetId);
                        if (targetElement) {
                            targetElement.classList.toggle('hidden');
                            // Thay đổi text của nút
                            if (targetElement.classList.contains('hidden')) {
                                button.textContent = 'View Details';
                            } else {
                                button.textContent = 'Hide Details';
                            }
                        }
                    });
                });
            }

            // --- HÀM MỚI: Xử lý Modal Thêm Câu hỏi (Add Question) ---
            function initAddQuestionModal() {
                const questionTypeSelect = document.getElementById('question-type-select');
                const answersContainer = document.getElementById('answers-container');
                const addAnswerButton = document.getElementById('add-answer-option');

                function renderAnswerOptions(type) {
                    const answerInputType = (type === 'mcq') ? 'checkbox' : 'radio';
                    const answerInputName = (type === 'mcq') ? 'correct-answer-mcq' : 'correct-answer-scq';
                    
                    let newHtml = `<label class="block text-sm font-medium text-gray-700">Answers</label>
                                   <div class="space-y-2 mt-1">
                                       <div class="flex items-center">
                                           <input type="${answerInputType}" name="${answerInputName}" class="w-4 h-4 text-indigo-600">
                                           <input type="text" placeholder="Answer Option 1" class="ml-2 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm">
                                       </div>
                                       <div class="flex items-center">
                                           <input type="${answerInputType}" name="${answerInputName}" class="w-4 h-4 text-indigo-600">
                                           <input type="text" placeholder="Answer Option 2" class="ml-2 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm">
                                       </div>
                                   </div>`;
                    // Ghi đè nội dung container
                    answersContainer.innerHTML = newHtml;

                    // Thêm nút "Add option" vào lại
                    answersContainer.appendChild(addAnswerButton);
                }
                
                // Thay đổi khi select
                if (questionTypeSelect) {
                    questionTypeSelect.addEventListener('change', (e) => {
                        renderAnswerOptions(e.target.value);
                    });
                }
                
                // Thêm lựa chọn
                if(addAnswerButton) {
                    addAnswerButton.addEventListener('click', () => {
                        const currentType = questionTypeSelect.value;
                        const answerInputType = (currentType === 'mcq') ? 'checkbox' : 'radio';
                        const answerInputName = (currentType === 'mcq') ? 'correct-answer-mcq' : 'correct-answer-scq';
                        
                        const newOption = document.createElement('div');
                        newOption.className = 'flex items-center';
                        newOption.innerHTML = `
                            <input type="${answerInputType}" name="${answerInputName}" class="w-4 h-4 text-indigo-600">
                            <input type="text" placeholder="Another Answer Option" class="ml-2 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm">
                        `;
                        // Thêm vào trước nút "Add option"
                        answersContainer.querySelector('.space-y-2').appendChild(newOption);
                    });
                }
            }


            // Hiển thị trang dashboard mặc định khi tải
            showPage('page-dashboard');

            // --- KHỞI TẠO ---
            initTabset("course-tabs", "course-tab-content");
            initModals(); // Khởi tạo các popup
            initToggleDetails(); // Khởi tạo nút View Details
            initAddQuestionModal(); // Khởi tạo logic cho modal Add Question
        });
    </script>

</body>
</html>